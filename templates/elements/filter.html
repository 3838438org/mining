<hr />
<div class="col-lg-12 panel-group">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#filter-collapse-{{d['slug']}}"><i class="fa fa-bar-chart-o"></i> Filters</a>
                <a href="/process/{{d['cube']}}.xls"><i class="fa fa-table"></i> Excel</a>
                <a href="/process/{{d['cube']}}.csv"><i class="fa fa-file-text-o"></i> CSV</a>
            </h3>
        </div>
        <div id="filter-collapse-{{d['slug']}}" class="panel-collapse collapse">
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-6">
                        <form role="form" name="form-filter">
                            <div class="form-group">
                                <label>Field</label>
                                <select class="form-control" ng-model="filter_field" ng-options="c for c in columns" required>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Operator</label>
                                <select class="form-control" ng-model="filter_operator" ng-options="op.value for op in operators" required>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Type</label>
                                <select class="form-control" ng-model="filter_type" ng-options="ty.value for ty in types" required>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Format</label>
                                <input class="form-control" ng-model="filter_format" required>
                            </div>
                            <div class="form-group">
                                <label>Value</label>
                                <input class="form-control" ng-model="filter_value" required>
                                <p class="help-block">For range filter use: <i>xx:yy.</i></p>
                            </div>
                            <button type="button" class="btn btn-success btn-lg btn-block" ng-click="addFilter()">Add Filter</button>
                        </form><!-- /.row -->
                    </div>
                    <div class="col-lg-6">
                        <ul>
                            <li ng-repeat="(key,val) in filters"><button ng-click="removeFilter(key)"><i class="glyphicon glyphicon-remove"></i></button>{{! key }} = {{! val }}</li>
                        </ul>
                        <button type="button" class="btn btn-primary btn-lg btn-block" ng-click="applyFilters('{{d['cube']}}', '{{d['categories']}}', '{{d['_type']}}', '{{d['name']}}')">Apply Filters</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
